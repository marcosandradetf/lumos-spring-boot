<div class="relative w-full h-full">
  <app-prime-breadcrumb [title]="getDescription() ?? 'Visualizar'" [path]="['Pré-medição', 'Visualizar']" ></app-prime-breadcrumb>

  <app-loading-overlay [loading]="loading"></app-loading-overlay>

  <div>
    <div class="flex justify-between mx-5 mb-5">
      <h2 class="text-3xl font-semibold">Itens</h2>
      <div class="flex gap-2">
        <p-button severity="secondary" rounded icon="pi pi-file-edit" label="Editar Itens"></p-button>
        <p-button severity="secondary" rounded icon="pi pi-file-pdf" label="Gerar relatório"></p-button>
        <p-button severity="contrast" rounded icon="pi pi-check" label="Continuar"></p-button>
      </div>
    </div>
    <p-table [value]="items" [tableStyle]="{ 'min-width': '50rem' }">
      <ng-template #header>
        <tr>
          <th pSortableColumn="description">
            Descrição
            <p-sortIcon field="description" />
          </th>
          <th pSortableColumn="totalMeasured">Qtde. Necessária
            <p-sortIcon field="totalMeasured" /></th>
          <th pSortableColumn="totalContractedQuantity">Qtde. Contratada
            <p-sortIcon field="totalContractedQuantity" /></th>
          <th pSortableColumn="totalQuantityExecuted">Qtde. Executada
            <p-sortIcon field="totalQuantityExecuted" /></th>
          <th pSortableColumn="totalCurrentBalance">Saldo atual
            <p-sortIcon field="totalCurrentBalance" /></th>
          <th>Status</th>
        </tr>
      </ng-template>
      <ng-template #body let-item>
        <tr [ngClass]="rowClass(item)" [ngStyle]="rowStyle(item)">
          <td>{{item.description}}</td>
          <td>{{item.totalMeasured}}</td>
          <td>{{item.totalContractedQuantity}}</td>
          <td>{{item.totalQuantityExecuted}}</td>
          <td>{{item.totalCurrentBalance}}</td>
          <td>
            <p-badge [value]="itemStatus(item)" [severity]="itemSeverity(item)" />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>


  <p-toast position="bottom-center"></p-toast>

</div>
