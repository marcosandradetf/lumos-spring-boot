<div class="card flex justify-center">
  <p-drawer
    position="right"
    [visible]="(SharedState.showNotificationDrawer$ | async) ?? false"
    (visibleChange)="onDrawerChange($event)"
    [closable]="false"
    styleClass="w-96 max-w-full">

    <!-- HEADER -->
    <ng-template #header>
      <div class="flex items-center justify-between px-4 py-3 border-b border-neutral-200 dark:border-neutral-800">

        <div class="flex items-center gap-3">
          <span class="pi pi-bell text-lg text-neutral-500"></span>
          <span class="font-semibold text-base">Notificações</span>
        </div>

        <button
          pRipple
          class="text-sm text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"
          (click)="markAllAsRead()">
          Marcar todas como lidas
        </button>
      </div>
    </ng-template>

    <!-- CONTENT -->
    <div class="flex flex-col divide-y divide-neutral-200 dark:divide-neutral-800">

      <!-- Grupo -->
      <div class="px-4 py-3">
      <span class="text-xs font-semibold text-neutral-400 uppercase">
        Hoje
      </span>
      </div>

      <!-- Item -->
      <div
        *ngFor="let notification of notifications"
        class="flex gap-3 px-4 py-3 cursor-pointer transition hover:bg-neutral-50 dark:hover:bg-neutral-900"
        [ngClass]="{'bg-blue-50 dark:bg-blue-900/20': !notification.read}"
        (click)="openNotification(notification)">

        <!-- Indicador -->
        <span
          *ngIf="!notification.read"
          class="mt-2 w-2 h-2 rounded-full bg-blue-500 flex-shrink-0">
      </span>

        <!-- Conteúdo -->
        <div class="flex flex-col gap-1 min-w-0">
        <span class="text-sm font-medium truncate">
          {{ notification.title }}
        </span>
          <span class="text-sm text-neutral-500 line-clamp-2">
          {{ notification.message }}
        </span>
          <span class="text-xs text-neutral-400">
          {{ notification.time }}
        </span>
        </div>
      </div>

      <!-- Estado vazio -->
      <div
        *ngIf="notifications.length === 0"
        class="flex flex-col items-center justify-center py-16 text-neutral-400">

        <span class="pi pi-bell-slash text-3xl mb-3"></span>
        <p class="text-sm">Nenhuma notificação no momento</p>
      </div>

    </div>

  </p-drawer>

</div>

