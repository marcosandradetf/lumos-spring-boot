<div class="h-full w-full relative">
  <div class="pt-2 w-full pl-2 flex items-center justify-between">
    <p-breadcrumb class="max-w-full" [model]="items" [home]="home"/>
    <h3
      class="text-medium pr-5 hidden lg:block font-medium">teste</h3>
  </div>

  @if (loading) {
    <div class="absolute top-1/2 right-1/2">
      <app-loading></app-loading>
    </div>

  } @else {
    <div>
      <p-table [tableStyle]="{ 'min-width': '50rem' }" *ngIf="reservations.length === 0" [value]="tableSk">
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="description">Descrição
              <p-sortIcon field="description"/>
            </th>
            <th pSortableColumn="price">Especificação
              <p-sortIcon field="price"/>
            </th>
            <th pSortableColumn="category">Equipe Responsável
              <p-sortIcon field="category"/>
            </th>
            <th pSortableColumn="quantity">Quantidade
              <p-sortIcon field="quantity"/>
            </th>
            <th pSortableColumn="inventoryStatus">Status
              <p-sortIcon field="inventoryStatus"/>
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-tbSk>
          <tr>
            <td class="p-4">
              <p-skeleton/>
            </td>
            <td>
              <p-skeleton/>
            </td>
            <td>
              <p-skeleton/>
            </td>
            <td>
              <p-skeleton/>
            </td>
            <td>
              <p-skeleton/>
            </td>
          </tr>
        </ng-template>
      </p-table>

      <div *ngFor="let group of reservations" class="px-10">
        <h3 class="text-xl pb-2">{{ group.description }}</h3>
        <p-table
          #table_parent
          [value]="group.reservations" [tableStyle]="{ 'min-width': '60rem' }"
          editMode="row"
          selectionMode="single"
          dataKey="contractItemId">

          <ng-template pTemplate="header">
            <tr>
              <!--          <th pSortableColumn="itemId">Id-->
              <!--            <p-sortIcon field="itemId"/>-->
              <!--          </th>-->
              <th pSortableColumn="description">Material
                <p-sortIcon field="description"/>
              </th>
              <th pSortableColumn="linking">Quantidade
                <p-sortIcon field="linking"/>
              </th>
              <th pSortableColumn="teamName">Equipe Responsável
                <p-sortIcon field="teamName"/>
              </th>
              <th pSortableColumn="inventoryStatus">Status
                <p-sortIcon field="inventoryStatus"/>
              </th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-reserve>
            <tr #rowElement [pEditableRow]="reserve"
                [pSelectableRow]="reserve">
              <td>{{ reserve.materialName }}</td>
              <td>
                {{ reserve.reserveQuantity }}
              </td>
              <td>
                <button (click)="showTeamModal = true">
                  <p-tag severity="info" styleClass="cursor-pointer"
                         pTooltip="Clique para detalhes">{{ reserve.teamName }}
                  </p-tag>
                </button>
              </td>
              <td>
                <p-tag severity="contrast">PENDENTE</p-tag>
              </td>
<!--              @if (currentItemId > 0) {-->
<!--                <td class="space-x-2">-->
<!--                  <p-button [label]="existsMaterial(item.contractItemId) ? 'Remover' : 'Cancelar'" size="small"-->
<!--                            variant="text" severity="contrast"-->
<!--                            *ngIf="currentItemId === item.contractItemId"-->
<!--                            (click)="Cancel(item, rowElement)"/>-->
<!--                  <p-button label="Confirmar" icon="pi pi-check" size="small" [raised]="true"-->
<!--                            *ngIf="currentItemId === item.contractItemId"-->
<!--                            (click)="Confirm(item, rowElement)"/>-->
<!--                </td>-->
<!--              } @else {-->
<!--                <td>-->
<!--                  <p-tag [value]="existsMaterial(item.contractItemId) ? 'SELECIONADO' : 'NÃO SELECIONADO'"-->
<!--                         [severity]="existsMaterial(item.contractItemId) ? 'success' : 'danger'"/>-->
<!--                </td>-->
<!--              }-->
            </tr>
          </ng-template>
        </p-table>
        <div class="py-4 px-10 flex justify-end">
          <p-button label="APROVAR" size="small" />
        </div>

      </div>


    </div>



  }

  <p-toast/>
</div>
